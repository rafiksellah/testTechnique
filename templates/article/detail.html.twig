{% extends 'base.html.twig' %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}
<style>
    .article-detail {
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
    }

    .article-title {
        color: #343a40;
        font-weight: bold;
    }

    .article-content {
        margin-top: 20px;
        font-size: 1.1em;
    }

    .article-meta {
        color: #6c757d;
        font-size: 0.9em;
    }
</style>

<div class="container mt-5">
    <div class="article-detail">
        <h1 class="article-title">{{ article.title }}</h1>
        <p class="article-meta">
            <small>By: {{ article.author.email }}</small><br>
            <small>Published on: {{ article.publishedAt|date('Y-m-d H:i') }}</small>
        </p>
        <div class="article-content">
            <p>{{ article.content }}</p>
        </div>

        <div class="text-center mt-4">
            {% if canEdit %}
            <a href="{{ path('edit_article', {id: article.id}) }}" class="btn btn-warning">Edit Article</a>
            <form method="post" action="{{ path('delete_article', { id: article.id }) }}" style="display:inline;"
                onsubmit="return confirmDeletion();">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ article.id) }}">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
            {% endif %}
        </div>
    </div>
</div>
<script>
    function confirmDeletion() {
        return confirm("Are you sure you want to delete this article?");
    }
</script>
{% endblock %}